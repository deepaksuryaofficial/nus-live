<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>

</head>
<body>
    <nav class="navbar navbar-dark bg-dark">
        <div class="container">
            <span class="navbar-brand mb-0 h1">Backtesting Design</span>
            <a href="/" style="color: whitesmoke; margin-left: auto; margin-right: 15px;">Top Stock ROI</a>
            <a href="/topstocks" style="color: whitesmoke;">Top 10 Stocks</a>
        </div>         
      </nav>
      <div class="container" style="margin-top: 30px;">
        <label for="sector">Choose sector:</label>
        <select name="sector" id="sector" onclick="onClickSector()">
            {% for item in sectors%}
          <option value="{{item}}">{{item}}</option>
            {% endfor %}
        </select>
    
        <label for="week">Choose Week:</label>
        <select name="week" id="week" onchange="" >
            {% for item in weeks%}
          <option value="{{item}}">{{item}}</option>
            {% endfor %}
        </select>
    
        <label for="code">Choose Weeks from TopStock date:</label>
        <select name="period" id="period" onclick="">
            {% for item in periods%}
            <option value="{{item}}">{{item}}</option>
              {% endfor %}
        </select>
        
        <button type="button" class="btn btn-dark" style="margin-left: 20px ;" onclick="submitFilterFunc()"> Filter and Search</button>
    
    
        <p id="demo"></p>

        <div class="container">
            <div class="row">
                <div id="chartContainer1" style="height: 270px; width: 500px; margin: 30px;"></div>
                <div id="chartContainer2" style="height: 270px; width: 500px; margin: 30px;"></div>
            </div>
            <div class="row">
                <div id="chartContainer3" style="height: 270px; width: 500px; margin: 30px;"></div>
                <div id="chartContainer4" style="height: 270px; width: 500px; margin: 30px;"></div>
            </div>
            
            
        </div>
    </div>

    <script>
        var sectors_all={{sectors_all|safe}}
        var start_dates_all ={{start_dates_all|safe}}
        var end_dates_all ={{end_dates_all|safe}}
        var codes_all ={{codes_all|safe}}
        

        var weeks= {{weeks|safe}}
        var sectors= {{sectors|safe}}
        

        var Week1PandL_list= {{Week1PandL_list|safe}}
        var Week2PandL_list= {{Week2PandL_list|safe}}
        var Week4PandL_list= {{Week4PandL_list|safe}}
        var Week8PandL_list= {{Week8PandL_list|safe}}
        var Week12PandL_list= {{Week12PandL_list|safe}}
        var Week24PandL_list= {{Week24PandL_list|safe}}

        var Week1PandL_percent_list= {{Week1PandL_percent_list|safe}}
        var Week2PandL_percent_list= {{Week2PandL_percent_list|safe}}
        var Week4PandL_percent_list= {{Week4PandL_percent_list|safe}}
        var Week8PandL_percent_list= {{Week8PandL_percent_list|safe}}
        var Week12PandL_percent_list= {{Week12PandL_percent_list|safe}}
        var Week24PandL_percent_list= {{Week24PandL_percent_list|safe}}


        var close_list_all = {{close_list_all|safe}}

        function onClickSector(){
            var sector_value= document.getElementById("sector").value;
            var weeksArray=["all"]
            //create weeks array 
            if(sector_value!="all"){
                for(i=0;i<sectors_all.length;i++){
                    if(sectors_all[i]==sector_value){
                        if(weeksArray.indexOf(start_dates_all[i]+" to "+ end_dates_all[i])===-1){
                            weeksArray.push(start_dates_all[i]+" to "+ end_dates_all[i]);
                        }
                        
                        
                    }
                }
                console.log(weeksArray);
                
            }else{
                for(i=1;i<weeks.length;i++){
                    weeksArray.push(weeks[i])
                }
                console.log(weeksArray);
            }
            //delete the list in dropdown

            dropdownLengthBefore=document.getElementById("week").options.length;
            console.log("dropdownLength Weeks Before:",dropdownLengthBefore)                    

            for(i = dropdownLengthBefore-1; i >= 0; i--) {
                document.getElementById("week").options.remove(i);                       
            }           

            //update the dropdown with weeks array 
            for(i=0; i<weeksArray.length;i++){
                        var weekList = document.getElementById("week");
                        var option = document.createElement("option");
                        option.text = weeksArray[i];
                        weekList.add(option);
                    }
            
            dropdownLengthAfter=document.getElementById("week").options.length;
            console.log("dropdownLength Weeks After:",dropdownLengthAfter)
                    


        }

        function submitFilterFunc(){
            console.log(Week1PandL_percent_list)
            var sector_value= document.getElementById("sector").value;
            var week_value= document.getElementById("week").value;
            var period_value= document.getElementById("period").value;
            document.getElementById("demo").innerHTML="sector value:"+sector_value+", week value:"+week_value+ ", period value:"+ period_value;
            
            var top_win_stocks=[]
            var top_loss_stocks=[]
            var top_win_stocks_percent=[]
            var top_loss_stocks_percent=[]

            function sortNumber(a, b) {
            return a - b;
            }   

            function getInd(arr, val) {
            var index = [], i = -1;
            while ((i = arr.indexOf(val, i+1)) != -1){
                index.push(i);
            }
            return index;
            }

            if(sector_value=="all" && week_value=="all"){
                if(period_value=="1"){
                Week1PandL_list_sorted= Week1PandL_list.concat().sort(function(a, b){return a - b});      
                    var i=0;
                    while(top_loss_stocks.length<11){
                        index_array= getInd(Week1PandL_list, Week1PandL_list_sorted[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_loss_stocks.indexOf(index_array[j])==-1){
                                top_loss_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_loss_stocks.length!=10){
                        top_loss_stocks.pop();
                    }
                    Week1PandL_list_sorted_reversed= Week1PandL_list_sorted.reverse()
                    i=0;
                    while(top_win_stocks.length<11){
                        index_array= getInd(Week1PandL_list, Week1PandL_list_sorted_reversed[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_win_stocks.indexOf(index_array[j])==-1){
                                top_win_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                     
                    }
                    while(top_win_stocks.length!=10){
                        top_win_stocks.pop();
                    }

                    Week1PandL_percent_list_sorted= Week1PandL_percent_list.concat().sort(function(a, b){return a - b}); 
                    var i=0;
                    while(top_loss_stocks_percent.length<11){
                        index_array_percent= getInd(Week1PandL_percent_list, Week1PandL_percent_list_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_loss_stocks_percent.indexOf(index_array_percent[j])==-1){
                                top_loss_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                        
                    }

                    while(top_loss_stocks_percent.length!=10){
                        top_loss_stocks_percent.pop();
                    }

                    Week1PandL_percent_list_sorted= Week1PandL_percent_list.concat().sort(function(a, b){return a - b}).reverse(); 
                    var i=0;
                    while(top_win_stocks_percent.length<11){
                        index_array_percent= getInd(Week1PandL_percent_list, Week1PandL_percent_list_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_win_stocks_percent.indexOf(index_array_percent[j])==-1){
                                top_win_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                        
                    }

                    while(top_win_stocks_percent.length!=10){
                        top_win_stocks_percent.pop();
                    }
                    

                    console.log("top_win_stocks_percent: ",top_win_stocks_percent.length, top_win_stocks_percent)


                
        
                }

                if(period_value=="2"){   

                    Week2PandL_list_sorted= Week2PandL_list.concat().sort(function(a, b){return a - b});      
                    var i=0;
                    while(top_loss_stocks.length<11){
                        index_array= getInd(Week2PandL_list, Week2PandL_list_sorted[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_loss_stocks.indexOf(index_array[j])==-1){
                                top_loss_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_loss_stocks.length!=10){
                        top_loss_stocks.pop();
                    }
                    Week2PandL_list_sorted_reversed= Week2PandL_list_sorted.reverse()
                    i=0;
                    while(top_win_stocks.length<11){
                        index_array= getInd(Week2PandL_list, Week2PandL_list_sorted_reversed[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_win_stocks.indexOf(index_array[j])==-1){
                                top_win_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                     
                    }
                    while(top_win_stocks.length!=10){
                        top_win_stocks.pop();
                    }

                    Week2PandL_percent_list_sorted= Week2PandL_percent_list.concat().sort(function(a, b){return a - b}); 
                    var i=0;
                    while(top_loss_stocks_percent.length<11){
                        index_array_percent= getInd(Week2PandL_percent_list, Week2PandL_percent_list_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_loss_stocks_percent.indexOf(index_array_percent[j])==-1){
                                top_loss_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                        
                    }

                    while(top_loss_stocks_percent.length!=10){
                        top_loss_stocks_percent.pop();
                    }

                    Week2PandL_percent_list_sorted= Week2PandL_percent_list.concat().sort(function(a, b){return a - b}).reverse(); 
                    var i=0;
                    while(top_win_stocks_percent.length<11){
                        index_array_percent= getInd(Week2PandL_percent_list, Week2PandL_percent_list_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_win_stocks_percent.indexOf(index_array_percent[j])==-1){
                                top_win_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                        
                    }

                    while(top_win_stocks_percent.length!=10){
                        top_win_stocks_percent.pop();
                    }
                    

                    console.log("top_win_stocks_percent: ",top_win_stocks_percent.length, top_win_stocks_percent)


                    
                }

                if(period_value=="4"){                    
                    Week4PandL_list_sorted= Week4PandL_list.concat().sort(function(a, b){return a - b});      
                    var i=0;
                    while(top_loss_stocks.length<11){
                        index_array= getInd(Week4PandL_list, Week4PandL_list_sorted[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_loss_stocks.indexOf(index_array[j])==-1){
                                top_loss_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_loss_stocks.length!=10){
                        top_loss_stocks.pop();
                    }
                    Week4PandL_list_sorted_reversed= Week4PandL_list_sorted.reverse()
                    i=0;
                    while(top_win_stocks.length<11){
                        index_array= getInd(Week4PandL_list, Week4PandL_list_sorted_reversed[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_win_stocks.indexOf(index_array[j])==-1){
                                top_win_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                     
                    }
                    while(top_win_stocks.length!=10){
                        top_win_stocks.pop();
                    }


                    Week4PandL_percent_list_sorted= Week4PandL_percent_list.concat().sort(function(a, b){return a - b}); 
                    var i=0;
                    while(top_loss_stocks_percent.length<11){
                        index_array_percent= getInd(Week4PandL_percent_list, Week4PandL_percent_list_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_loss_stocks_percent.indexOf(index_array_percent[j])==-1){
                                top_loss_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                        
                    }

                    while(top_loss_stocks_percent.length!=10){
                        top_loss_stocks_percent.pop();
                    }

                    Week4PandL_percent_list_sorted= Week4PandL_percent_list.concat().sort(function(a, b){return a - b}).reverse(); 
                    var i=0;
                    while(top_win_stocks_percent.length<11){
                        index_array_percent= getInd(Week4PandL_percent_list, Week4PandL_percent_list_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_win_stocks_percent.indexOf(index_array_percent[j])==-1){
                                top_win_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                        
                    }

                    while(top_win_stocks_percent.length!=10){
                        top_win_stocks_percent.pop();
                    }
                    

                    console.log("top_win_stocks_percent: ",top_win_stocks_percent.length, top_win_stocks_percent)
                }
                

                if(period_value=="8"){                    
                    Week8PandL_list_sorted= Week8PandL_list.concat().sort(function(a, b){return a - b});      
                    var i=0;
                    while(top_loss_stocks.length<11){
                        index_array= getInd(Week8PandL_list, Week8PandL_list_sorted[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_loss_stocks.indexOf(index_array[j])==-1){
                                top_loss_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_loss_stocks.length!=10){
                        top_loss_stocks.pop();
                    }
                    Week8PandL_list_sorted_reversed= Week8PandL_list_sorted.reverse()
                    i=0;
                    while(top_win_stocks.length<11){
                        index_array= getInd(Week8PandL_list, Week8PandL_list_sorted_reversed[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_win_stocks.indexOf(index_array[j])==-1){
                                top_win_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                     
                    }
                    while(top_win_stocks.length!=10){
                        top_win_stocks.pop();
                    }

                    Week12PandL_percent_list_sorted= Week12PandL_percent_list.concat().sort(function(a, b){return a - b}); 
                    var i=0;
                    while(top_loss_stocks_percent.length<11){
                        index_array_percent= getInd(Week12PandL_percent_list, Week12PandL_percent_list_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_loss_stocks_percent.indexOf(index_array_percent[j])==-1){
                                top_loss_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                        
                    }

                    while(top_loss_stocks_percent.length!=10){
                        top_loss_stocks_percent.pop();
                    }

                    Week12PandL_percent_list_sorted= Week12PandL_percent_list.concat().sort(function(a, b){return a - b}).reverse(); 
                    var i=0;
                    while(top_win_stocks_percent.length<11){
                        index_array_percent= getInd(Week12PandL_percent_list, Week12PandL_percent_list_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_win_stocks_percent.indexOf(index_array_percent[j])==-1){
                                top_win_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                        
                    }

                    while(top_win_stocks_percent.length!=10){
                        top_win_stocks_percent.pop();
                    }
                    

                    console.log("top_win_stocks_percent: ",top_win_stocks_percent.length, top_win_stocks_percent)

                }

                if(period_value=="12"){                    
                    Week12PandL_list_sorted= Week12PandL_list.concat().sort(function(a, b){return a - b});      
                    var i=0;
                    while(top_loss_stocks.length<11){
                        index_array= getInd(Week12PandL_list, Week12PandL_list_sorted[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_loss_stocks.indexOf(index_array[j])==-1){
                                top_loss_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_loss_stocks.length!=10){
                        top_loss_stocks.pop();
                    }
                    Week12PandL_list_sorted_reversed= Week12PandL_list_sorted.reverse()
                    i=0;
                    while(top_win_stocks.length<11){
                        index_array= getInd(Week12PandL_list, Week12PandL_list_sorted_reversed[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_win_stocks.indexOf(index_array[j])==-1){
                                top_win_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                     
                    }
                    while(top_win_stocks.length!=10){
                        top_win_stocks.pop();
                    }

                    Week12PandL_percent_list_sorted= Week12PandL_percent_list.concat().sort(function(a, b){return a - b}); 
                    var i=0;
                    while(top_loss_stocks_percent.length<11){
                        index_array_percent= getInd(Week12PandL_percent_list, Week12PandL_percent_list_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_loss_stocks_percent.indexOf(index_array_percent[j])==-1){
                                top_loss_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                        
                    }

                    while(top_loss_stocks_percent.length!=10){
                        top_loss_stocks_percent.pop();
                    }

                    Week12PandL_percent_list_sorted= Week12PandL_percent_list.concat().sort(function(a, b){return a - b}).reverse(); 
                    var i=0;
                    while(top_win_stocks_percent.length<11){
                        index_array_percent= getInd(Week12PandL_percent_list, Week12PandL_percent_list_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_win_stocks_percent.indexOf(index_array_percent[j])==-1){
                                top_win_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                        
                    }

                    while(top_win_stocks_percent.length!=10){
                        top_win_stocks_percent.pop();
                    }
                    

                    console.log("top_win_stocks_percent: ",top_win_stocks_percent.length, top_win_stocks_percent)

                }

                if(period_value=="24"){                    
                    Week24PandL_list_sorted= Week24PandL_list.concat().sort(function(a, b){return a - b});      
                    var i=0;
                    while(top_loss_stocks.length<11){
                        index_array= getInd(Week24PandL_list, Week24PandL_list_sorted[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_loss_stocks.indexOf(index_array[j])==-1){
                                top_loss_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_loss_stocks.length!=10){
                        top_loss_stocks.pop();
                    }
                    Week24PandL_list_sorted_reversed= Week24PandL_list_sorted.reverse()
                    i=0;
                    while(top_win_stocks.length<11){
                        index_array= getInd(Week24PandL_list, Week24PandL_list_sorted_reversed[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_win_stocks.indexOf(index_array[j])==-1){
                                top_win_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                     
                    }
                    while(top_win_stocks.length!=10){
                        top_win_stocks.pop();
                    }
                    
                    Week24PandL_percent_list_sorted= Week24PandL_percent_list.concat().sort(function(a, b){return a - b}); 
                    var i=0;
                    while(top_loss_stocks_percent.length<11){
                        index_array_percent= getInd(Week24PandL_percent_list, Week24PandL_percent_list_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_loss_stocks_percent.indexOf(index_array_percent[j])==-1){
                                top_loss_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                        
                    }

                    while(top_loss_stocks_percent.length!=10){
                        top_loss_stocks_percent.pop();
                    }

                    Week24PandL_percent_list_sorted= Week24PandL_percent_list.concat().sort(function(a, b){return a - b}).reverse(); 
                    var i=0;
                    while(top_win_stocks_percent.length<11){
                        index_array_percent= getInd(Week24PandL_percent_list, Week24PandL_percent_list_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_win_stocks_percent.indexOf(index_array_percent[j])==-1){
                                top_win_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                        
                    }

                    while(top_win_stocks_percent.length!=10){
                        top_win_stocks_percent.pop();
                    }
                    

                    console.log("top_win_stocks_percent: ",top_win_stocks_percent.length, top_win_stocks_percent)

                }
                
                
                }
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////                ////////////////////////////////////////////////////////////////////////////////////////
                if(sector_value!="all" && week_value=="all"){               

                var sector_value= document.getElementById("sector").value;
                var week_value= document.getElementById("week").value;
                var period_value= document.getElementById("period").value;

                if(period_value=="1"){      
                    Week1PandL_list_filtered=[]
                    for(i=0;i<sectors_all.length;i++){
                        if(sectors_all[i]==sector_value){
                            Week1PandL_list_filtered.push(Week1PandL_list[i])
                        }
                    }    

                    Week1PandL_list_sorted= Week1PandL_list_filtered.concat().sort(function(a, b){return a - b});      
                    var i=0;
                    while(top_loss_stocks.length<11){
                        index_array= getInd(Week1PandL_list, Week1PandL_list_sorted[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_loss_stocks.indexOf(index_array[j])==-1 && sectors_all[index_array[j]]==sector_value){
                                top_loss_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_loss_stocks.length!=10){
                        top_loss_stocks.pop();
                    }
                    Week1PandL_list_sorted_reversed= Week1PandL_list_sorted.reverse()
                    i=0;
                    while(top_win_stocks.length<11){
                        index_array= getInd(Week1PandL_list, Week1PandL_list_sorted_reversed[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_win_stocks.indexOf(index_array[j])==-1 && sectors_all[index_array[j]]==sector_value){
                                top_win_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                     
                    }
                    while(top_win_stocks.length!=10){
                        top_win_stocks.pop();
                    }
//////////////////////////
                    Week1PandL_list_percent_filtered=[]
                    for(i=0;i<sectors_all.length;i++){
                        if(sectors_all[i]==sector_value){
                            Week1PandL_list_percent_filtered.push(Week1PandL_percent_list[i])
                        }
                    }    
                    
                    Week1PandL_list_percent_sorted= Week1PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}); 
                    var i=0;
                    while(top_loss_stocks_percent.length<11){
                        index_array_percent= getInd(Week1PandL_percent_list, Week1PandL_list_percent_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_loss_stocks_percent.indexOf(index_array_percent[j])==-1 && sectors_all[index_array_percent[j]]==sector_value){
                                top_loss_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_loss_stocks_percent.length!=10){
                        top_loss_stocks_percent.pop();
                    }

                    Week1PandL_list_percent_sorted= Week1PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}).reverse(); 
                    var i=0;
                    while(top_win_stocks_percent.length<11){
                        index_array_percent= getInd(Week1PandL_percent_list, Week1PandL_list_percent_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_win_stocks_percent.indexOf(index_array_percent[j])==-1 && sectors_all[index_array_percent[j]]==sector_value){
                                top_win_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_win_stocks_percent.length!=10){
                        top_win_stocks_percent.pop();
                    }
                    
                    console.log("top_win_stocks_percent: ", top_win_stocks_percent);

///////////////////////
                    

                }

                if(period_value=="2"){      
                    Week2PandL_list_filtered=[]
                    for(i=0;i<sectors_all.length;i++){
                        if(sectors_all[i]==sector_value){
                            Week2PandL_list_filtered.push(Week2PandL_list[i])
                        }
                    }              
                    Week2PandL_list_sorted= Week2PandL_list_filtered.concat().sort(function(a, b){return a - b});      
                    var i=0;
                    while(top_loss_stocks.length<11){
                        index_array= getInd(Week2PandL_list, Week2PandL_list_sorted[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_loss_stocks.indexOf(index_array[j])==-1 && sectors_all[index_array[j]]==sector_value){
                                top_loss_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_loss_stocks.length!=10){
                        top_loss_stocks.pop();
                    }

                    Week2PandL_list_sorted_reversed= Week2PandL_list_sorted.reverse()
                    i=0;
                    while(top_win_stocks.length<11){
                        index_array= getInd(Week2PandL_list, Week2PandL_list_sorted_reversed[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_win_stocks.indexOf(index_array[j]) && sectors_all[index_array[j]]==sector_value){
                                top_win_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                     
                    }
                    while(top_win_stocks.length!=10){
                        top_win_stocks.pop();
                    }
////////////////////////
                    Week2PandL_list_percent_filtered=[]
                    for(i=0;i<sectors_all.length;i++){
                        if(sectors_all[i]==sector_value){
                            Week2PandL_list_percent_filtered.push(Week2PandL_percent_list[i])
                        }
                    }    
                    
                    Week2PandL_list_percent_sorted= Week2PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}); 
                    var i=0;
                    while(top_loss_stocks_percent.length<11){
                        index_array_percent= getInd(Week2PandL_percent_list, Week2PandL_list_percent_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_loss_stocks_percent.indexOf(index_array_percent[j])==-1 && sectors_all[index_array_percent[j]]==sector_value){
                                top_loss_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_loss_stocks_percent.length!=10){
                        top_loss_stocks_percent.pop();
                    }

                    Week2PandL_list_percent_sorted= Week2PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}).reverse(); 
                    var i=0;
                    while(top_win_stocks_percent.length<11){
                        index_array_percent= getInd(Week2PandL_percent_list, Week2PandL_list_percent_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_win_stocks_percent.indexOf(index_array_percent[j])==-1 && sectors_all[index_array_percent[j]]==sector_value){
                                top_win_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_win_stocks_percent.length!=10){
                        top_win_stocks_percent.pop();
                    }
                    
                    console.log("top_win_stocks_percent: ", top_win_stocks_percent);

///////////////////////
                    
                                      



                }

                if(period_value=="4"){      
                    Week4PandL_list_filtered=[]
                    for(i=0;i<sectors_all.length;i++){
                        if(sectors_all[i]==sector_value){
                            Week4PandL_list_filtered.push(Week4PandL_list[i])
                        }
                    }              
                    Week4PandL_list_sorted= Week4PandL_list_filtered.concat().sort(function(a, b){return a - b});      
                    var i=0;
                    while(top_loss_stocks.length<11){
                        index_array= getInd(Week4PandL_list, Week4PandL_list_sorted[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_loss_stocks.indexOf(index_array[j])==-1 && sectors_all[index_array[j]]==sector_value){
                                top_loss_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_loss_stocks.length!=10){
                        top_loss_stocks.pop();
                    }
                    Week4PandL_list_sorted_reversed= Week4PandL_list_sorted.reverse()
                    i=0;
                    while(top_win_stocks.length<11){
                        index_array= getInd(Week4PandL_list, Week4PandL_list_sorted_reversed[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_win_stocks.indexOf(index_array[j])==-1 && sectors_all[index_array[j]]==sector_value){
                                top_win_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                     
                    }
                    while(top_win_stocks.length!=10){
                        top_win_stocks.pop();
                    }

////////////////////////
                    Week4PandL_list_percent_filtered=[]
                    for(i=0;i<sectors_all.length;i++){
                        if(sectors_all[i]==sector_value){
                            Week4PandL_list_percent_filtered.push(Week4PandL_percent_list[i])
                        }
                    }    
                    
                    Week4PandL_list_percent_sorted= Week4PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}); 
                    var i=0;
                    while(top_loss_stocks_percent.length<11){
                        index_array_percent= getInd(Week4PandL_percent_list, Week4PandL_list_percent_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_loss_stocks_percent.indexOf(index_array_percent[j])==-1 && sectors_all[index_array_percent[j]]==sector_value){
                                top_loss_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_loss_stocks_percent.length!=10){
                        top_loss_stocks_percent.pop();
                    }

                    Week4PandL_list_percent_sorted= Week4PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}).reverse(); 
                    var i=0;
                    while(top_win_stocks_percent.length<11){
                        index_array_percent= getInd(Week4PandL_percent_list, Week4PandL_list_percent_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_win_stocks_percent.indexOf(index_array_percent[j])==-1 && sectors_all[index_array_percent[j]]==sector_value){
                                top_win_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_win_stocks_percent.length!=10){
                        top_win_stocks_percent.pop();
                    }
                    
                    console.log("top_win_stocks_percent: ", top_win_stocks_percent);

///////////////////////
                                       


                }

                if(period_value=="8"){      
                    Week8PandL_list_filtered=[]
                    for(i=0;i<sectors_all.length;i++){
                        if(sectors_all[i]==sector_value){
                            Week8PandL_list_filtered.push(Week8PandL_list[i])
                        }
                    }              
                    Week8PandL_list_sorted= Week8PandL_list_filtered.concat().sort(function(a, b){return a - b});      
                    var i=0;
                    while(top_loss_stocks.length<11){
                        index_array= getInd(Week8PandL_list, Week8PandL_list_sorted[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_loss_stocks.indexOf(index_array[j])==-1 && sectors_all[index_array[j]]==sector_value){
                                top_loss_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_loss_stocks.length!=10){
                        top_loss_stocks.pop();
                    }
                    Week8PandL_list_sorted_reversed= Week8PandL_list_sorted.reverse()
                    i=0;
                    while(top_win_stocks.length<11){
                        index_array= getInd(Week8PandL_list, Week8PandL_list_sorted_reversed[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_win_stocks.indexOf(index_array[j])==-1 && sectors_all[index_array[j]]==sector_value){
                                top_win_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                     
                    }
                    while(top_win_stocks.length!=10){
                        top_win_stocks.pop();
                    }

                    ////////////////////////
                    Week8PandL_list_percent_filtered=[]
                    for(i=0;i<sectors_all.length;i++){
                        if(sectors_all[i]==sector_value){
                            Week8PandL_list_percent_filtered.push(Week8PandL_percent_list[i])
                        }
                    }    
                    
                    Week8PandL_list_percent_sorted= Week8PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}); 
                    var i=0;
                    while(top_loss_stocks_percent.length<11){
                        index_array_percent= getInd(Week8PandL_percent_list, Week8PandL_list_percent_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_loss_stocks_percent.indexOf(index_array_percent[j])==-1 && sectors_all[index_array_percent[j]]==sector_value){
                                top_loss_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_loss_stocks_percent.length!=10){
                        top_loss_stocks_percent.pop();
                    }

                    Week8PandL_list_percent_sorted= Week8PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}).reverse(); 
                    var i=0;
                    while(top_win_stocks_percent.length<11){
                        index_array_percent= getInd(Week8PandL_percent_list, Week8PandL_list_percent_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_win_stocks_percent.indexOf(index_array_percent[j])==-1 && sectors_all[index_array_percent[j]]==sector_value){
                                top_win_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_win_stocks_percent.length!=10){
                        top_win_stocks_percent.pop();
                    }
                    
                    console.log("top_win_stocks_percent: ", top_win_stocks_percent);

///////////////////////

                }

                if(period_value=="12"){      
                    Week12PandL_list_filtered=[]
                    for(i=0;i<sectors_all.length;i++){
                        if(sectors_all[i]==sector_value){
                            Week12PandL_list_filtered.push(Week12PandL_list[i])
                        }
                    }              
                    Week12PandL_list_sorted= Week12PandL_list_filtered.concat().sort(function(a, b){return a - b});      
                    var i=0;
                    while(top_loss_stocks.length<11){
                        index_array= getInd(Week12PandL_list, Week12PandL_list_sorted[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_loss_stocks.indexOf(index_array[j])==-1 && sectors_all[index_array[j]]==sector_value){
                                top_loss_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_loss_stocks.length!=10){
                        top_loss_stocks.pop();
                    }
                    Week12PandL_list_sorted_reversed= Week12PandL_list_sorted.reverse()
                    i=0;
                    while(top_win_stocks.length<11){
                        index_array= getInd(Week12PandL_list, Week12PandL_list_sorted_reversed[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_win_stocks.indexOf(index_array[j])==-1 && sectors_all[index_array[j]]==sector_value){
                                top_win_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                     
                    }
                    while(top_win_stocks.length!=10){
                        top_win_stocks.pop();
                    }

                    ////////////////////////
                    Week12PandL_list_percent_filtered=[]
                    for(i=0;i<sectors_all.length;i++){
                        if(sectors_all[i]==sector_value){
                            Week12PandL_list_percent_filtered.push(Week12PandL_percent_list[i])
                        }
                    }    
                    
                    Week12PandL_list_percent_sorted= Week12PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}); 
                    var i=0;
                    while(top_loss_stocks_percent.length<11){
                        index_array_percent= getInd(Week12PandL_percent_list, Week12PandL_list_percent_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_loss_stocks_percent.indexOf(index_array_percent[j])==-1 && sectors_all[index_array_percent[j]]==sector_value){
                                top_loss_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_loss_stocks_percent.length!=10){
                        top_loss_stocks_percent.pop();
                    }

                    Week12PandL_list_percent_sorted= Week12PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}).reverse(); 
                    var i=0;
                    while(top_win_stocks_percent.length<11){
                        index_array_percent= getInd(Week12PandL_percent_list, Week12PandL_list_percent_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_win_stocks_percent.indexOf(index_array_percent[j])==-1 && sectors_all[index_array_percent[j]]==sector_value){
                                top_win_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_win_stocks_percent.length!=10){
                        top_win_stocks_percent.pop();
                    }
                    
                    console.log("top_win_stocks_percent: ", top_win_stocks_percent);

///////////////////////
                }

                if(period_value=="24"){      
                    Week24PandL_list_filtered=[]
                    for(i=0;i<sectors_all.length;i++){
                        if(sectors_all[i]==sector_value){
                            Week24PandL_list_filtered.push(Week24PandL_list[i])
                        }
                    }              
                    Week24PandL_list_sorted= Week24PandL_list_filtered.concat().sort(function(a, b){return a - b});      
                    var i=0;
                    while(top_loss_stocks.length<11){
                        index_array= getInd(Week24PandL_list, Week24PandL_list_sorted[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_loss_stocks.indexOf(index_array[j])==-1 && sectors_all[index_array[j]]==sector_value){
                                top_loss_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_loss_stocks.length!=10){
                        top_loss_stocks.pop();
                    }
                    Week24PandL_list_sorted_reversed= Week24PandL_list_sorted.reverse()
                    i=0;
                    while(top_win_stocks.length<11){
                        index_array= getInd(Week24PandL_list, Week24PandL_list_sorted_reversed[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_win_stocks.indexOf(index_array[j])==-1 && sectors_all[index_array[j]]==sector_value){
                                top_win_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                     
                    }
                    while(top_win_stocks.length!=10){
                        top_win_stocks.pop();
                    }
////////////////////////
                    Week24PandL_list_percent_filtered=[]
                    for(i=0;i<sectors_all.length;i++){
                        if(sectors_all[i]==sector_value){
                            Week24PandL_list_percent_filtered.push(Week24PandL_percent_list[i])
                        }
                    }    
                    
                    Week24PandL_list_percent_sorted= Week24PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}); 
                    var i=0;
                    while(top_loss_stocks_percent.length<11){
                        index_array_percent= getInd(Week24PandL_percent_list, Week24PandL_list_percent_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_loss_stocks_percent.indexOf(index_array_percent[j])==-1 && sectors_all[index_array_percent[j]]==sector_value){
                                top_loss_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_loss_stocks_percent.length!=10){
                        top_loss_stocks_percent.pop();
                    }

                    Week24PandL_list_percent_sorted= Week24PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}).reverse(); 
                    var i=0;
                    while(top_win_stocks_percent.length<11){
                        index_array_percent= getInd(Week24PandL_percent_list, Week24PandL_list_percent_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_win_stocks_percent.indexOf(index_array_percent[j])==-1 && sectors_all[index_array_percent[j]]==sector_value){
                                top_win_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_win_stocks_percent.length!=10){
                        top_win_stocks_percent.pop();
                    }
                    
                    console.log("top_win_stocks_percent: ", top_win_stocks_percent);

///////////////////////
                                      



                }

            }
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////            

            if(sector_value=="all" && week_value!="all"){

                var sector_value= document.getElementById("sector").value;
                var week_value= document.getElementById("week").value;
                var period_value= document.getElementById("period").value;

                if(period_value=="1"){      
                    Week1PandL_list_filtered=[]
                    for(i=0;i<start_dates_all.length;i++){
                        if(start_dates_all[i]+" to "+ end_dates_all[i]==week_value){
                            Week1PandL_list_filtered.push(Week1PandL_list[i])
                        }
                    }    

                    Week1PandL_list_sorted= Week1PandL_list_filtered.concat().sort(function(a, b){return a - b});      
                    var i=0;
                    while(top_loss_stocks.length<11){
                        index_array= getInd(Week1PandL_list, Week1PandL_list_sorted[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_loss_stocks.indexOf(index_array[j])==-1 && start_dates_all[index_array[j]] +" to "+ end_dates_all[index_array[j]]==week_value){
                                top_loss_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_loss_stocks.length!=10){
                        top_loss_stocks.pop();
                    }
                    Week1PandL_list_sorted_reversed= Week1PandL_list_sorted.reverse()
                    i=0;
                    while(top_win_stocks.length<11){
                        index_array= getInd(Week1PandL_list, Week1PandL_list_sorted_reversed[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_win_stocks.indexOf(index_array[j])==-1  && start_dates_all[index_array[j]] +" to "+ end_dates_all[index_array[j]]==week_value){
                                top_win_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                     
                    }
                    while(top_win_stocks.length!=10){
                        top_win_stocks.pop();
                    }
                    
                    ///////////////////
                    Week1PandL_list_percent_filtered=[]
                    for(i=0;i<start_dates_all.length;i++){
                        if(start_dates_all[i]+" to "+ end_dates_all[i]==week_value){
                            Week1PandL_list_percent_filtered.push(Week1PandL_percent_list[i])
                        }
                    }    
                    Week1PandL_list_percent_sorted= Week1PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}); 

                    var i=0;
                    while(top_loss_stocks_percent.length<11){
                        index_array_percent= getInd(Week1PandL_percent_list, Week1PandL_list_percent_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_loss_stocks_percent.indexOf(index_array_percent[j])==-1 && start_dates_all[index_array_percent[j]] +" to "+ end_dates_all[index_array_percent[j]]==week_value){
                                top_loss_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                                                
                    }
                    while(top_loss_stocks_percent.length!=10){
                        top_loss_stocks_percent.pop();
                    }

                    console.log("top_loss_stocks_percent: ", top_loss_stocks_percent)

                    Week1PandL_list_percent_sorted= Week1PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}).reverse(); 

                    var i=0;
                    while(top_win_stocks_percent.length<11){
                        index_array_percent= getInd(Week1PandL_percent_list, Week1PandL_list_percent_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_win_stocks_percent.indexOf(index_array_percent[j])==-1 && start_dates_all[index_array_percent[j]] +" to "+ end_dates_all[index_array_percent[j]]==week_value){
                                top_win_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                                                
                    }
                    while(top_win_stocks_percent.length!=10){
                        top_win_stocks_percent.pop();
                    }

                    console.log("top_win_stocks_percent: ", top_win_stocks_percent)
                    ///////////////////

                }

                if(period_value=="2"){      
                    Week2PandL_list_filtered=[]
                    for(i=0;i<start_dates_all.length;i++){
                        if(start_dates_all[i]+" to "+ end_dates_all[i]==week_value){
                            Week2PandL_list_filtered.push(Week2PandL_list[i])
                        }
                    }              
                    Week2PandL_list_sorted= Week2PandL_list_filtered.concat().sort(function(a, b){return a - b});      
                    var i=0;
                    while(top_loss_stocks.length<11){
                        index_array= getInd(Week2PandL_list, Week2PandL_list_sorted[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_loss_stocks.indexOf(index_array[j])==-1  && start_dates_all[index_array[j]] +" to "+ end_dates_all[index_array[j]]==week_value){
                                top_loss_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_loss_stocks.length!=10){
                        top_loss_stocks.pop();
                    }
                    Week2PandL_list_sorted_reversed= Week2PandL_list_sorted.reverse()
                    i=0;
                    while(top_win_stocks.length<11){
                        index_array= getInd(Week2PandL_list, Week2PandL_list_sorted_reversed[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_win_stocks.indexOf(index_array[j])==-1  && start_dates_all[index_array[j]] +" to "+ end_dates_all[index_array[j]]==week_value){
                                top_win_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                     
                    }
                    while(top_win_stocks.length!=10){
                        top_win_stocks.pop();
                    }

                    ///////////////////
                    Week2PandL_list_percent_filtered=[]
                    for(i=0;i<start_dates_all.length;i++){
                        if(start_dates_all[i]+" to "+ end_dates_all[i]==week_value){
                            Week2PandL_list_percent_filtered.push(Week2PandL_percent_list[i])
                        }
                    }    
                    Week2PandL_list_percent_sorted= Week2PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}); 

                    var i=0;
                    while(top_loss_stocks_percent.length<11){
                        index_array_percent= getInd(Week2PandL_percent_list, Week2PandL_list_percent_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_loss_stocks_percent.indexOf(index_array_percent[j])==-1 && start_dates_all[index_array_percent[j]] +" to "+ end_dates_all[index_array_percent[j]]==week_value){
                                top_loss_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                                                
                    }
                    while(top_loss_stocks_percent.length!=10){
                        top_loss_stocks_percent.pop();
                    }

                    console.log("top_loss_stocks_percent: ", top_loss_stocks_percent)

                    Week2PandL_list_percent_sorted= Week2PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}).reverse(); 

                    var i=0;
                    while(top_win_stocks_percent.length<11){
                        index_array_percent= getInd(Week2PandL_percent_list, Week2PandL_list_percent_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_win_stocks_percent.indexOf(index_array_percent[j])==-1 && start_dates_all[index_array_percent[j]] +" to "+ end_dates_all[index_array_percent[j]]==week_value){
                                top_win_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                                                
                    }
                    while(top_win_stocks_percent.length!=10){
                        top_win_stocks_percent.pop();
                    }

                    console.log("top_win_stocks_percent: ", top_win_stocks_percent)
                    ///////////////////


                }

                if(period_value=="4"){      
                    Week4PandL_list_filtered=[]
                    for(i=0;i<start_dates_all.length;i++){
                        if(start_dates_all[i]+" to "+ end_dates_all[i]==week_value){
                            Week4PandL_list_filtered.push(Week4PandL_list[i])
                        }
                    }              
                    Week4PandL_list_sorted= Week4PandL_list_filtered.concat().sort(function(a, b){return a - b});      
                    var i=0;
                    while(top_loss_stocks.length<11){
                        index_array= getInd(Week4PandL_list, Week4PandL_list_sorted[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_loss_stocks.indexOf(index_array[j])==-1  && start_dates_all[index_array[j]] +" to "+ end_dates_all[index_array[j]]==week_value){
                                top_loss_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_loss_stocks.length!=10){
                        top_loss_stocks.pop();
                    }
                    Week4PandL_list_sorted_reversed= Week4PandL_list_sorted.reverse()
                    i=0;
                    while(top_win_stocks.length<11){
                        index_array= getInd(Week4PandL_list, Week4PandL_list_sorted_reversed[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_win_stocks.indexOf(index_array[j])==-1  && start_dates_all[index_array[j]] +" to "+ end_dates_all[index_array[j]]==week_value){
                                top_win_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                     
                    }
                    while(top_win_stocks.length!=10){
                        top_win_stocks.pop();
                    }

                    ///////////////////
                    Week4PandL_list_percent_filtered=[]
                    for(i=0;i<start_dates_all.length;i++){
                        if(start_dates_all[i]+" to "+ end_dates_all[i]==week_value){
                            Week4PandL_list_percent_filtered.push(Week4PandL_percent_list[i])
                        }
                    }    
                    Week4PandL_list_percent_sorted= Week4PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}); 

                    var i=0;
                    while(top_loss_stocks_percent.length<11){
                        index_array_percent= getInd(Week4PandL_percent_list, Week4PandL_list_percent_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_loss_stocks_percent.indexOf(index_array_percent[j])==-1 && start_dates_all[index_array_percent[j]] +" to "+ end_dates_all[index_array_percent[j]]==week_value){
                                top_loss_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                                                
                    }
                    while(top_loss_stocks_percent.length!=10){
                        top_loss_stocks_percent.pop();
                    }

                    console.log("top_loss_stocks_percent: ", top_loss_stocks_percent)

                    Week4PandL_list_percent_sorted= Week4PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}).reverse(); 

                    var i=0;
                    while(top_win_stocks_percent.length<11){
                        index_array_percent= getInd(Week4PandL_percent_list, Week4PandL_list_percent_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_win_stocks_percent.indexOf(index_array_percent[j])==-1 && start_dates_all[index_array_percent[j]] +" to "+ end_dates_all[index_array_percent[j]]==week_value){
                                top_win_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                                                
                    }
                    while(top_win_stocks_percent.length!=10){
                        top_win_stocks_percent.pop();
                    }

                    console.log("top_win_stocks_percent: ", top_win_stocks_percent)
                    ///////////////////

                }

                if(period_value=="8"){      
                    Week8PandL_list_filtered=[]
                    for(i=0;i<start_dates_all.length;i++){
                        if(start_dates_all[i]+" to "+ end_dates_all[i]==week_value){
                            Week8PandL_list_filtered.push(Week8PandL_list[i])
                        }
                    }              
                    Week8PandL_list_sorted= Week8PandL_list_filtered.concat().sort(function(a, b){return a - b});      
                    var i=0;
                    while(top_loss_stocks.length<11){
                        index_array= getInd(Week8PandL_list, Week8PandL_list_sorted[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_loss_stocks.indexOf(index_array[j])==-1  && start_dates_all[index_array[j]] +" to "+ end_dates_all[index_array[j]]==week_value){
                                top_loss_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_loss_stocks.length!=10){
                        top_loss_stocks.pop();
                    }
                    Week8PandL_list_sorted_reversed= Week8PandL_list_sorted.reverse()
                    i=0;
                    while(top_win_stocks.length<11){
                        index_array= getInd(Week8PandL_list, Week8PandL_list_sorted_reversed[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_win_stocks.indexOf(index_array[j])==-1  && start_dates_all[index_array[j]] +" to "+ end_dates_all[index_array[j]]==week_value){
                                top_win_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                     
                    }
                    while(top_win_stocks.length!=10){
                        top_win_stocks.pop();
                    }

                    ///////////////////
                    Week8PandL_list_percent_filtered=[]
                    for(i=0;i<start_dates_all.length;i++){
                        if(start_dates_all[i]+" to "+ end_dates_all[i]==week_value){
                            Week8PandL_list_percent_filtered.push(Week8PandL_percent_list[i])
                        }
                    }    
                    Week8PandL_list_percent_sorted= Week8PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}); 

                    var i=0;
                    while(top_loss_stocks_percent.length<11){
                        index_array_percent= getInd(Week8PandL_percent_list, Week8PandL_list_percent_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_loss_stocks_percent.indexOf(index_array_percent[j])==-1 && start_dates_all[index_array_percent[j]] +" to "+ end_dates_all[index_array_percent[j]]==week_value){
                                top_loss_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                                                
                    }
                    while(top_loss_stocks_percent.length!=10){
                        top_loss_stocks_percent.pop();
                    }

                    console.log("top_loss_stocks_percent: ", top_loss_stocks_percent)

                    Week8PandL_list_percent_sorted= Week8PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}).reverse(); 

                    var i=0;
                    while(top_win_stocks_percent.length<11){
                        index_array_percent= getInd(Week8PandL_percent_list, Week8PandL_list_percent_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_win_stocks_percent.indexOf(index_array_percent[j])==-1 && start_dates_all[index_array_percent[j]] +" to "+ end_dates_all[index_array_percent[j]]==week_value){
                                top_win_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                                                
                    }
                    while(top_win_stocks_percent.length!=10){
                        top_win_stocks_percent.pop();
                    }

                    console.log("top_win_stocks_percent: ", top_win_stocks_percent)
                    ///////////////////

                }

                if(period_value=="12"){      
                    Week12PandL_list_filtered=[]
                    for(i=0;i<start_dates_all.length;i++){
                        if(start_dates_all[i]+" to "+ end_dates_all[i]==week_value){
                            Week12PandL_list_filtered.push(Week12PandL_list[i])
                        }
                    }              
                    Week12PandL_list_sorted= Week12PandL_list_filtered.concat().sort(function(a, b){return a - b});      
                    var i=0;
                    while(top_loss_stocks.length<11){
                        index_array= getInd(Week12PandL_list, Week12PandL_list_sorted[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_loss_stocks.indexOf(index_array[j])==-1  && start_dates_all[index_array[j]] +" to "+ end_dates_all[index_array[j]]==week_value){
                                top_loss_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_loss_stocks.length!=10){
                        top_loss_stocks.pop();
                    }
                    Week12PandL_list_sorted_reversed= Week12PandL_list_sorted.reverse()
                    i=0;
                    while(top_win_stocks.length<11){
                        index_array= getInd(Week12PandL_list, Week12PandL_list_sorted_reversed[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_win_stocks.indexOf(index_array[j])==-1  && start_dates_all[index_array[j]] +" to "+ end_dates_all[index_array[j]]==week_value){
                                top_win_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                     
                    }
                    while(top_win_stocks.length!=10){
                        top_win_stocks.pop();
                    }

                    ///////////////////
                    Week12PandL_list_percent_filtered=[]
                    for(i=0;i<start_dates_all.length;i++){
                        if(start_dates_all[i]+" to "+ end_dates_all[i]==week_value){
                            Week12PandL_list_percent_filtered.push(Week12PandL_percent_list[i])
                        }
                    }    
                    Week12PandL_list_percent_sorted= Week12PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}); 

                    var i=0;
                    while(top_loss_stocks_percent.length<11){
                        index_array_percent= getInd(Week12PandL_percent_list, Week12PandL_list_percent_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_loss_stocks_percent.indexOf(index_array_percent[j])==-1 && start_dates_all[index_array_percent[j]] +" to "+ end_dates_all[index_array_percent[j]]==week_value){
                                top_loss_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                                                
                    }
                    while(top_loss_stocks_percent.length!=10){
                        top_loss_stocks_percent.pop();
                    }

                    console.log("top_loss_stocks_percent: ", top_loss_stocks_percent)

                    Week12PandL_list_percent_sorted= Week12PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}).reverse(); 

                    var i=0;
                    while(top_win_stocks_percent.length<11){
                        index_array_percent= getInd(Week12PandL_percent_list, Week12PandL_list_percent_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_win_stocks_percent.indexOf(index_array_percent[j])==-1 && start_dates_all[index_array_percent[j]] +" to "+ end_dates_all[index_array_percent[j]]==week_value){
                                top_win_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                                                
                    }
                    while(top_win_stocks_percent.length!=10){
                        top_win_stocks_percent.pop();
                    }

                    console.log("top_win_stocks_percent: ", top_win_stocks_percent)
                    ///////////////////

                }
                
                if(period_value=="24"){      
                    Week24PandL_list_filtered=[]
                    for(i=0;i<start_dates_all.length;i++){
                        if(start_dates_all[i]+" to "+ end_dates_all[i]==week_value){
                            Week24PandL_list_filtered.push(Week24PandL_list[i])
                        }
                    }              
                    Week24PandL_list_sorted= Week24PandL_list_filtered.concat().sort(function(a, b){return a - b});      
                    var i=0;
                    while(top_loss_stocks.length<11){
                        index_array= getInd(Week24PandL_list, Week24PandL_list_sorted[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_loss_stocks.indexOf(index_array[j])==-1  && start_dates_all[index_array[j]] +" to "+ end_dates_all[index_array[j]]==week_value){
                                top_loss_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                        
                    }
                    while(top_loss_stocks.length!=10){
                        top_loss_stocks.pop();
                    }
                    Week24PandL_list_sorted_reversed= Week24PandL_list_sorted.reverse()
                    i=0;
                    while(top_win_stocks.length<11){
                        index_array= getInd(Week24PandL_list, Week24PandL_list_sorted_reversed[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_win_stocks.indexOf(index_array[j])==-1  && start_dates_all[index_array[j]] +" to "+ end_dates_all[index_array[j]]==week_value){
                                top_win_stocks.push(index_array[j]);
                            }
                            
                        }

                        i++;
                     
                    }
                    while(top_win_stocks.length!=10){
                        top_win_stocks.pop();
                    }

                    ///////////////////
                    Week24PandL_list_percent_filtered=[]
                    for(i=0;i<start_dates_all.length;i++){
                        if(start_dates_all[i]+" to "+ end_dates_all[i]==week_value){
                            Week24PandL_list_percent_filtered.push(Week24PandL_percent_list[i])
                        }
                    }    
                    Week24PandL_list_percent_sorted= Week24PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}); 

                    var i=0;
                    while(top_loss_stocks_percent.length<11){
                        index_array_percent= getInd(Week24PandL_percent_list, Week24PandL_list_percent_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_loss_stocks_percent.indexOf(index_array_percent[j])==-1 && start_dates_all[index_array_percent[j]] +" to "+ end_dates_all[index_array_percent[j]]==week_value){
                                top_loss_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                                                
                    }
                    while(top_loss_stocks_percent.length!=10){
                        top_loss_stocks_percent.pop();
                    }

                    console.log("top_loss_stocks_percent: ", top_loss_stocks_percent)

                    Week24PandL_list_percent_sorted= Week24PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}).reverse(); 

                    var i=0;
                    while(top_win_stocks_percent.length<11){
                        index_array_percent= getInd(Week24PandL_percent_list, Week24PandL_list_percent_sorted[i]);
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_win_stocks_percent.indexOf(index_array_percent[j])==-1 && start_dates_all[index_array_percent[j]] +" to "+ end_dates_all[index_array_percent[j]]==week_value){
                                top_win_stocks_percent.push(index_array_percent[j]);
                            }
                            
                        }

                        i++;
                                                
                    }
                    while(top_win_stocks_percent.length!=10){
                        top_win_stocks_percent.pop();
                    }

                    console.log("top_win_stocks_percent: ", top_win_stocks_percent)
                    ///////////////////

                }

            }

            if(sector_value!="all" && week_value!="all"){

                var sector_value= document.getElementById("sector").value;
                var week_value= document.getElementById("week").value;
                var period_value= document.getElementById("period").value;

                if(period_value=="1"){      
                    Week1PandL_list_filtered=[]
                    for(i=0;i<start_dates_all.length;i++){
                        if(start_dates_all[i]+" to "+ end_dates_all[i]==week_value && sectors_all[i]==sector_value){
                            Week1PandL_list_filtered.push(Week1PandL_list[i])
                        }
                    }              
                    Week1PandL_list_sorted= Week1PandL_list_filtered.concat().sort(function(a, b){return a - b});      
                    var i=0;

                    for(i;i<Week1PandL_list_sorted.length;i++){
                        index_array= getInd(Week1PandL_list, Week1PandL_list_sorted[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_loss_stocks.indexOf(index_array[j])==-1 && start_dates_all[index_array[j]] +" to "+ end_dates_all[index_array[j]]==week_value && sectors_all[index_array[j]]==sector_value ){
                                top_loss_stocks.push(index_array[j]);
                            }
                            
                        }

                                                
                    }
                    if(top_loss_stocks.length>10){
                        while(top_loss_stocks.length>10){
                        top_loss_stocks.pop();
                    }
                    }
                    
                    Week1PandL_list_sorted_reversed= Week1PandL_list_sorted.reverse()
                    i=0;

                    for(i;i<Week1PandL_list_sorted.length;i++){
                        index_array= getInd(Week1PandL_list, Week1PandL_list_sorted_reversed[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_win_stocks.indexOf(index_array[j])==-1 && start_dates_all[index_array[j]] +" to "+ end_dates_all[index_array[j]]==week_value && sectors_all[index_array[j]]==sector_value){
                                top_win_stocks.push(index_array[j]);
                            }
                            
                        }

                                             
                    }

                    if(top_loss_stocks.length>10){
                        while(top_win_stocks.length>10){
                        top_win_stocks.pop();
                    }
                    }  
///////////////////////////////
                    Week1PandL_list_percent_filtered=[]
                    for(i=0;i<start_dates_all.length;i++){
                        if(start_dates_all[i]+" to "+ end_dates_all[i]==week_value && sectors_all[i]==sector_value){
                            Week1PandL_list_percent_filtered.push(Week1PandL_percent_list[i])
                        }
                    }
                    Week1PandL_list_percent_sorted= Week1PandL_list_percent_filtered.concat().sort(function(a, b){return a - b});

                    var i=0;

                    for(i;i<Week1PandL_list_percent_sorted.length;i++){
                        index_array_percent= getInd(Week1PandL_percent_list, Week1PandL_list_percent_sorted[i]);
                        
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_loss_stocks_percent.indexOf(index_array_percent[j])==-1 && start_dates_all[index_array_percent[j]] +" to "+ end_dates_all[index_array_percent[j]]==week_value && sectors_all[index_array_percent[j]]==sector_value ){
                                top_loss_stocks_percent.push(index_array_percent[j]);
                                
                            }
                            
                        }

                                                
                    }   
                    if(top_loss_stocks_percent.length>10){
                        while(top_loss_stocks_percent.length>10){
                            top_loss_stocks_percent.pop();
                    }
                    }  
                    console.log("top_loss_stocks_percent: ", top_loss_stocks_percent)

                    
                    Week1PandL_list_percent_sorted= Week1PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}).reverse();

                    var i=0;

                    for(i;i<Week1PandL_list_percent_sorted.length;i++){
                        index_array_percent= getInd(Week1PandL_percent_list, Week1PandL_list_percent_sorted[i]);
                        
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_win_stocks_percent.indexOf(index_array_percent[j])==-1 && start_dates_all[index_array_percent[j]] +" to "+ end_dates_all[index_array_percent[j]]==week_value && sectors_all[index_array_percent[j]]==sector_value ){
                                top_win_stocks_percent.push(index_array_percent[j]);
                                
                            }
                            
                        }

                                                
                    }   
                    if(top_win_stocks_percent.length>10){
                        while(top_win_stocks_percent.length>10){
                            top_win_stocks_percent.pop();
                    }
                    }  
                    console.log("top_win_stocks_percent: ", top_win_stocks_percent)

                    

//////////////////////////////////////                                


                    

                }
            }

            if(period_value=="2"){      
                    Week2PandL_list_filtered=[]
                    for(i=0;i<start_dates_all.length;i++){
                        if(start_dates_all[i]+" to "+ end_dates_all[i]==week_value && sectors_all[i]==sector_value){
                            Week2PandL_list_filtered.push(Week2PandL_list[i])
                        }
                    }              
                    Week2PandL_list_sorted= Week2PandL_list_filtered.concat().sort(function(a, b){return a - b});      
                    var i=0;

                    for(i;i<Week2PandL_list_sorted.length;i++){
                        index_array= getInd(Week2PandL_list, Week2PandL_list_sorted[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_loss_stocks.indexOf(index_array[j])==-1 && start_dates_all[index_array[j]] +" to "+ end_dates_all[index_array[j]]==week_value && sectors_all[index_array[j]]==sector_value ){
                                top_loss_stocks.push(index_array[j]);
                            }
                            
                        }

                                                
                    }
                    if(top_loss_stocks.length>10){
                        while(top_loss_stocks.length>10){
                        top_loss_stocks.pop();
                    }
                    }
                    
                    Week2PandL_list_sorted_reversed= Week2PandL_list_sorted.reverse()
                    i=0;

                    for(i;i<Week2PandL_list_sorted.length;i++){
                        index_array= getInd(Week2PandL_list, Week2PandL_list_sorted_reversed[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_win_stocks.indexOf(index_array[j])==-1 && start_dates_all[index_array[j]] +" to "+ end_dates_all[index_array[j]]==week_value && sectors_all[index_array[j]]==sector_value){
                                top_win_stocks.push(index_array[j]);
                            }
                            
                        }

                                             
                    }

                    if(top_loss_stocks.length>10){
                        while(top_win_stocks.length>10){
                        top_win_stocks.pop();
                    }
                    }
                    
///////////////////////////////
                    Week2PandL_list_percent_filtered=[]
                    for(i=0;i<start_dates_all.length;i++){
                        if(start_dates_all[i]+" to "+ end_dates_all[i]==week_value && sectors_all[i]==sector_value){
                            Week2PandL_list_percent_filtered.push(Week2PandL_percent_list[i])
                        }
                    }
                    Week2PandL_list_percent_sorted= Week2PandL_list_percent_filtered.concat().sort(function(a, b){return a - b});

                    var i=0;

                    for(i;i<Week2PandL_list_percent_sorted.length;i++){
                        index_array_percent= getInd(Week2PandL_percent_list, Week2PandL_list_percent_sorted[i]);
                        
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_loss_stocks_percent.indexOf(index_array_percent[j])==-1 && start_dates_all[index_array_percent[j]] +" to "+ end_dates_all[index_array_percent[j]]==week_value && sectors_all[index_array_percent[j]]==sector_value ){
                                top_loss_stocks_percent.push(index_array_percent[j]);
                                
                            }
                            
                        }

                                                
                    }   
                    if(top_loss_stocks_percent.length>10){
                        while(top_loss_stocks_percent.length>10){
                            top_loss_stocks_percent.pop();
                    }
                    }  
                    console.log("top_loss_stocks_percent: ", top_loss_stocks_percent)

                    
                    Week2PandL_list_percent_sorted= Week2PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}).reverse();

                    var i=0;

                    for(i;i<Week2PandL_list_percent_sorted.length;i++){
                        index_array_percent= getInd(Week2PandL_percent_list, Week2PandL_list_percent_sorted[i]);
                        
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_win_stocks_percent.indexOf(index_array_percent[j])==-1 && start_dates_all[index_array_percent[j]] +" to "+ end_dates_all[index_array_percent[j]]==week_value && sectors_all[index_array_percent[j]]==sector_value ){
                                top_win_stocks_percent.push(index_array_percent[j]);
                                
                            }
                            
                        }

                                                
                    }   
                    if(top_win_stocks_percent.length>10){
                        while(top_win_stocks_percent.length>10){
                            top_win_stocks_percent.pop();
                    }
                    }  
                    console.log("top_win_stocks_percent: ", top_win_stocks_percent)

                    

//////////////////////////////////////   
                }

                if(period_value=="4"){      
                    Week4PandL_list_filtered=[]
                    for(i=0;i<start_dates_all.length;i++){
                        if(start_dates_all[i]+" to "+ end_dates_all[i]==week_value && sectors_all[i]==sector_value){
                            Week4PandL_list_filtered.push(Week4PandL_list[i])
                        }
                    }              
                    Week4PandL_list_sorted= Week4PandL_list_filtered.concat().sort(function(a, b){return a - b});      
                    var i=0;

                    for(i;i<Week4PandL_list_sorted.length;i++){
                        index_array= getInd(Week4PandL_list, Week4PandL_list_sorted[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_loss_stocks.indexOf(index_array[j])==-1 && start_dates_all[index_array[j]] +" to "+ end_dates_all[index_array[j]]==week_value && sectors_all[index_array[j]]==sector_value ){
                                top_loss_stocks.push(index_array[j]);
                            }
                            
                        }

                                                
                    }
                    if(top_loss_stocks.length>10){
                        while(top_loss_stocks.length>10){
                        top_loss_stocks.pop();
                    }
                    }
                    
                    Week4PandL_list_sorted_reversed= Week4PandL_list_sorted.reverse()
                    i=0;

                    for(i;i<Week4PandL_list_sorted.length;i++){
                        index_array= getInd(Week4PandL_list, Week4PandL_list_sorted_reversed[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_win_stocks.indexOf(index_array[j])==-1 && start_dates_all[index_array[j]] +" to "+ end_dates_all[index_array[j]]==week_value && sectors_all[index_array[j]]==sector_value){
                                top_win_stocks.push(index_array[j]);
                            }
                            
                        }

                                             
                    }

                    if(top_loss_stocks.length>10){
                        while(top_win_stocks.length>10){
                        top_win_stocks.pop();
                    }
                    }
///////////////////////////////
                    Week4PandL_list_percent_filtered=[]
                    for(i=0;i<start_dates_all.length;i++){
                        if(start_dates_all[i]+" to "+ end_dates_all[i]==week_value && sectors_all[i]==sector_value){
                            Week4PandL_list_percent_filtered.push(Week4PandL_percent_list[i])
                        }
                    }
                    Week4PandL_list_percent_sorted= Week4PandL_list_percent_filtered.concat().sort(function(a, b){return a - b});

                    var i=0;

                    for(i;i<Week4PandL_list_percent_sorted.length;i++){
                        index_array_percent= getInd(Week4PandL_percent_list, Week4PandL_list_percent_sorted[i]);
                        
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_loss_stocks_percent.indexOf(index_array_percent[j])==-1 && start_dates_all[index_array_percent[j]] +" to "+ end_dates_all[index_array_percent[j]]==week_value && sectors_all[index_array_percent[j]]==sector_value ){
                                top_loss_stocks_percent.push(index_array_percent[j]);
                                
                            }
                            
                        }

                                                
                    }   
                    if(top_loss_stocks_percent.length>10){
                        while(top_loss_stocks_percent.length>10){
                            top_loss_stocks_percent.pop();
                    }
                    }  
                    console.log("top_loss_stocks_percent: ", top_loss_stocks_percent)

                    
                    Week4PandL_list_percent_sorted= Week4PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}).reverse();

                    var i=0;

                    for(i;i<Week4PandL_list_percent_sorted.length;i++){
                        index_array_percent= getInd(Week4PandL_percent_list, Week4PandL_list_percent_sorted[i]);
                        
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_win_stocks_percent.indexOf(index_array_percent[j])==-1 && start_dates_all[index_array_percent[j]] +" to "+ end_dates_all[index_array_percent[j]]==week_value && sectors_all[index_array_percent[j]]==sector_value ){
                                top_win_stocks_percent.push(index_array_percent[j]);
                                
                            }
                            
                        }

                                                
                    }   
                    if(top_win_stocks_percent.length>10){
                        while(top_win_stocks_percent.length>10){
                            top_win_stocks_percent.pop();
                    }
                    }  
                    console.log("top_win_stocks_percent: ", top_win_stocks_percent)

                    

//////////////////////////////////////   

                }
            
                if(period_value=="8"){      
                    Week8PandL_list_filtered=[]
                    for(i=0;i<start_dates_all.length;i++){
                        if(start_dates_all[i]+" to "+ end_dates_all[i]==week_value && sectors_all[i]==sector_value){
                            Week8PandL_list_filtered.push(Week8PandL_list[i])
                        }
                    }              
                    Week8PandL_list_sorted= Week8PandL_list_filtered.concat().sort(function(a, b){return a - b});      
                    var i=0;

                    for(i;i<Week8PandL_list_sorted.length;i++){
                        index_array= getInd(Week8PandL_list, Week8PandL_list_sorted[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_loss_stocks.indexOf(index_array[j])==-1 && start_dates_all[index_array[j]] +" to "+ end_dates_all[index_array[j]]==week_value && sectors_all[index_array[j]]==sector_value ){
                                top_loss_stocks.push(index_array[j]);
                            }
                            
                        }

                                                
                    }
                    if(top_loss_stocks.length>10){
                        while(top_loss_stocks.length>10){
                        top_loss_stocks.pop();
                    }
                    }
                    
                    Week8PandL_list_sorted_reversed= Week8PandL_list_sorted.reverse()
                    i=0;

                    for(i;i<Week8PandL_list_sorted.length;i++){
                        index_array= getInd(Week8PandL_list, Week8PandL_list_sorted_reversed[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_win_stocks.indexOf(index_array[j])==-1 && start_dates_all[index_array[j]] +" to "+ end_dates_all[index_array[j]]==week_value && sectors_all[index_array[j]]==sector_value){
                                top_win_stocks.push(index_array[j]);
                            }
                            
                        }

                                             
                    }

                    if(top_loss_stocks.length>10){
                        while(top_win_stocks.length>10){
                        top_win_stocks.pop();
                    }
                    }
                    ///////////////////////////////
                    Week8PandL_list_percent_filtered=[]
                    for(i=0;i<start_dates_all.length;i++){
                        if(start_dates_all[i]+" to "+ end_dates_all[i]==week_value && sectors_all[i]==sector_value){
                            Week8PandL_list_percent_filtered.push(Week8PandL_percent_list[i])
                        }
                    }
                    Week8PandL_list_percent_sorted= Week8PandL_list_percent_filtered.concat().sort(function(a, b){return a - b});

                    var i=0;

                    for(i;i<Week8PandL_list_percent_sorted.length;i++){
                        index_array_percent= getInd(Week8PandL_percent_list, Week8PandL_list_percent_sorted[i]);
                        
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_loss_stocks_percent.indexOf(index_array_percent[j])==-1 && start_dates_all[index_array_percent[j]] +" to "+ end_dates_all[index_array_percent[j]]==week_value && sectors_all[index_array_percent[j]]==sector_value ){
                                top_loss_stocks_percent.push(index_array_percent[j]);
                                
                            }
                            
                        }

                                                
                    }   
                    if(top_loss_stocks_percent.length>10){
                        while(top_loss_stocks_percent.length>10){
                            top_loss_stocks_percent.pop();
                    }
                    }  
                    console.log("top_loss_stocks_percent: ", top_loss_stocks_percent)

                    
                    Week8PandL_list_percent_sorted= Week8PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}).reverse();

                    var i=0;

                    for(i;i<Week8PandL_list_percent_sorted.length;i++){
                        index_array_percent= getInd(Week8PandL_percent_list, Week8PandL_list_percent_sorted[i]);
                        
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_win_stocks_percent.indexOf(index_array_percent[j])==-1 && start_dates_all[index_array_percent[j]] +" to "+ end_dates_all[index_array_percent[j]]==week_value && sectors_all[index_array_percent[j]]==sector_value ){
                                top_win_stocks_percent.push(index_array_percent[j]);
                                
                            }
                            
                        }

                                                
                    }   
                    if(top_win_stocks_percent.length>10){
                        while(top_win_stocks_percent.length>10){
                            top_win_stocks_percent.pop();
                    }
                    }  
                    console.log("top_win_stocks_percent: ", top_win_stocks_percent)

                    

//////////////////////////////////////  

                }
            
                if(period_value=="12"){      
                    Week12PandL_list_filtered=[]
                    for(i=0;i<start_dates_all.length;i++){
                        if(start_dates_all[i]+" to "+ end_dates_all[i]==week_value && sectors_all[i]==sector_value){
                            Week12PandL_list_filtered.push(Week12PandL_list[i])
                        }
                    }              
                    Week12PandL_list_sorted= Week12PandL_list_filtered.concat().sort(function(a, b){return a - b});      
                    var i=0;

                    for(i;i<Week12PandL_list_sorted.length;i++){
                        index_array= getInd(Week12PandL_list, Week12PandL_list_sorted[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_loss_stocks.indexOf(index_array[j])==-1 && start_dates_all[index_array[j]] +" to "+ end_dates_all[index_array[j]]==week_value && sectors_all[index_array[j]]==sector_value ){
                                top_loss_stocks.push(index_array[j]);
                            }
                            
                        }

                                                
                    }
                    if(top_loss_stocks.length>10){
                        while(top_loss_stocks.length>10){
                        top_loss_stocks.pop();
                    }
                    }
                    
                    Week12PandL_list_sorted_reversed= Week12PandL_list_sorted.reverse()
                    i=0;

                    for(i;i<Week12PandL_list_sorted.length;i++){
                        index_array= getInd(Week12PandL_list, Week12PandL_list_sorted_reversed[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_win_stocks.indexOf(index_array[j])==-1 && start_dates_all[index_array[j]] +" to "+ end_dates_all[index_array[j]]==week_value && sectors_all[index_array[j]]==sector_value){
                                top_win_stocks.push(index_array[j]);
                            }
                            
                        }

                                             
                    }

                    if(top_loss_stocks.length>10){
                        while(top_win_stocks.length>10){
                        top_win_stocks.pop();
                    }
                    }
                     

///////////////////////////////
                    Week12PandL_list_percent_filtered=[]
                    for(i=0;i<start_dates_all.length;i++){
                        if(start_dates_all[i]+" to "+ end_dates_all[i]==week_value && sectors_all[i]==sector_value){
                            Week12PandL_list_percent_filtered.push(Week12PandL_percent_list[i])
                        }
                    }
                    Week12PandL_list_percent_sorted= Week12PandL_list_percent_filtered.concat().sort(function(a, b){return a - b});

                    var i=0;

                    for(i;i<Week12PandL_list_percent_sorted.length;i++){
                        index_array_percent= getInd(Week12PandL_percent_list, Week12PandL_list_percent_sorted[i]);
                        
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_loss_stocks_percent.indexOf(index_array_percent[j])==-1 && start_dates_all[index_array_percent[j]] +" to "+ end_dates_all[index_array_percent[j]]==week_value && sectors_all[index_array_percent[j]]==sector_value ){
                                top_loss_stocks_percent.push(index_array_percent[j]);
                                
                            }
                            
                        }

                                                
                    }   
                    if(top_loss_stocks_percent.length>10){
                        while(top_loss_stocks_percent.length>10){
                            top_loss_stocks_percent.pop();
                    }
                    }  
                    console.log("top_loss_stocks_percent: ", top_loss_stocks_percent)

                    
                    Week12PandL_list_percent_sorted= Week12PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}).reverse();

                    var i=0;

                    for(i;i<Week12PandL_list_percent_sorted.length;i++){
                        index_array_percent= getInd(Week12PandL_percent_list, Week12PandL_list_percent_sorted[i]);
                        
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_win_stocks_percent.indexOf(index_array_percent[j])==-1 && start_dates_all[index_array_percent[j]] +" to "+ end_dates_all[index_array_percent[j]]==week_value && sectors_all[index_array_percent[j]]==sector_value ){
                                top_win_stocks_percent.push(index_array_percent[j]);
                                
                            }
                            
                        }

                                                
                    }   
                    if(top_win_stocks_percent.length>10){
                        while(top_win_stocks_percent.length>10){
                            top_win_stocks_percent.pop();
                    }
                    }  
                    console.log("top_win_stocks_percent: ", top_win_stocks_percent)

                    

//////////////////////////////////////  
                }

                if(period_value=="24"){      
                    Week24PandL_list_filtered=[]
                    for(i=0;i<start_dates_all.length;i++){
                        if(start_dates_all[i]+" to "+ end_dates_all[i]==week_value && sectors_all[i]==sector_value){
                            Week24PandL_list_filtered.push(Week24PandL_list[i])
                        }
                    }              
                    Week24PandL_list_sorted= Week24PandL_list_filtered.concat().sort(function(a, b){return a - b});      
                    var i=0;

                    for(i;i<Week24PandL_list_sorted.length;i++){
                        index_array= getInd(Week24PandL_list, Week24PandL_list_sorted[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_loss_stocks.indexOf(index_array[j])==-1 && start_dates_all[index_array[j]] +" to "+ end_dates_all[index_array[j]]==week_value && sectors_all[index_array[j]]==sector_value ){
                                top_loss_stocks.push(index_array[j]);
                            }
                            
                        }

                                                
                    }
                    if(top_loss_stocks.length>10){
                        while(top_loss_stocks.length>10){
                        top_loss_stocks.pop();
                    }
                    }
                    
                    Week24PandL_list_sorted_reversed= Week24PandL_list_sorted.reverse()
                    i=0;

                    for(i;i<Week24PandL_list_sorted.length;i++){
                        index_array= getInd(Week24PandL_list, Week24PandL_list_sorted_reversed[i]);
                        
                        for(j=0;j<index_array.length;j++){
                            if(top_win_stocks.indexOf(index_array[j])==-1 && start_dates_all[index_array[j]] +" to "+ end_dates_all[index_array[j]]==week_value && sectors_all[index_array[j]]==sector_value){
                                top_win_stocks.push(index_array[j]);
                            }
                            
                        }

                                             
                    }

                    if(top_loss_stocks.length>10){
                        while(top_win_stocks.length>10){
                        top_win_stocks.pop();
                    }
                    }
                    
                    ///////////////////////////////
                    Week24PandL_list_percent_filtered=[]
                    for(i=0;i<start_dates_all.length;i++){
                        if(start_dates_all[i]+" to "+ end_dates_all[i]==week_value && sectors_all[i]==sector_value){
                            Week24PandL_list_percent_filtered.push(Week24PandL_percent_list[i])
                        }
                    }
                    Week24PandL_list_percent_sorted= Week24PandL_list_percent_filtered.concat().sort(function(a, b){return a - b});

                    var i=0;

                    for(i;i<Week24PandL_list_percent_sorted.length;i++){
                        index_array_percent= getInd(Week24PandL_percent_list, Week24PandL_list_percent_sorted[i]);
                        
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_loss_stocks_percent.indexOf(index_array_percent[j])==-1 && start_dates_all[index_array_percent[j]] +" to "+ end_dates_all[index_array_percent[j]]==week_value && sectors_all[index_array_percent[j]]==sector_value ){
                                top_loss_stocks_percent.push(index_array_percent[j]);
                                
                            }
                            
                        }

                                                
                    }   
                    if(top_loss_stocks_percent.length>10){
                        while(top_loss_stocks_percent.length>10){
                            top_loss_stocks_percent.pop();
                    }
                    }  
                    console.log("top_loss_stocks_percent: ", top_loss_stocks_percent)

                    
                    Week24PandL_list_percent_sorted= Week24PandL_list_percent_filtered.concat().sort(function(a, b){return a - b}).reverse();

                    var i=0;

                    for(i;i<Week24PandL_list_percent_sorted.length;i++){
                        index_array_percent= getInd(Week24PandL_percent_list, Week24PandL_list_percent_sorted[i]);
                        
                        
                        for(j=0;j<index_array_percent.length;j++){
                            if(top_win_stocks_percent.indexOf(index_array_percent[j])==-1 && start_dates_all[index_array_percent[j]] +" to "+ end_dates_all[index_array_percent[j]]==week_value && sectors_all[index_array_percent[j]]==sector_value ){
                                top_win_stocks_percent.push(index_array_percent[j]);
                                
                            }
                            
                        }

                                                
                    }   
                    if(top_win_stocks_percent.length>10){
                        while(top_win_stocks_percent.length>10){
                            top_win_stocks_percent.pop();
                    }
                    }  
                    console.log("top_win_stocks_percent: ", top_win_stocks_percent)

                    

//////////////////////////////////////  

                }

                


            console.log("top_loss_stocks: ",top_loss_stocks,"top_win_stocks: ",top_win_stocks);
            console.log("top_loss_stocks %: ",top_loss_stocks_percent,  "top_win_stocks %: ",top_win_stocks_percent)

            top_win_stocks_$=[]
            top_loss_stocks_$=[]
            top_win_stocks_percentage=[]
            top_loss_stocks_percentage=[]

            if(period_value =="1"){
                for(i=0;i<top_win_stocks.length;i++){
                    top_win_stocks_$[i]=Week1PandL_list[top_win_stocks[i]];
                }

                for(i=0;i<top_loss_stocks.length;i++){
                    top_loss_stocks_$[i]=Week1PandL_list[top_loss_stocks[i]];
                }

                for(i=0;i<top_win_stocks_percent.length;i++){
                    top_win_stocks_percentage[i]= Week1PandL_percent_list[top_win_stocks_percent[i]];

                }
                for(i=0;i<top_loss_stocks_percent.length;i++){
                    top_loss_stocks_percentage[i]= Week1PandL_percent_list[top_loss_stocks_percent[i]];

                }
                
            }

            if(period_value =="2"){
                for(i=0;i<top_win_stocks.length;i++){
                    top_win_stocks_$[i]=Week2PandL_list[top_win_stocks[i]];
                }

                for(i=0;i<top_loss_stocks.length;i++){
                    top_loss_stocks_$[i]=Week2PandL_list[top_loss_stocks[i]];
                }

                for(i=0;i<top_win_stocks_percent.length;i++){
                    top_win_stocks_percentage[i]= Week2PandL_percent_list[top_win_stocks_percent[i]];

                }
                for(i=0;i<top_loss_stocks_percent.length;i++){
                    top_loss_stocks_percentage[i]= Week2PandL_percent_list[top_loss_stocks_percent[i]];

                }
                
            }

            if(period_value =="4"){
                for(i=0;i<top_win_stocks.length;i++){
                    top_win_stocks_$[i]=Week4PandL_list[top_win_stocks[i]];
                }

                for(i=0;i<top_loss_stocks.length;i++){
                    top_loss_stocks_$[i]=Week4PandL_list[top_loss_stocks[i]];
                }

                for(i=0;i<top_win_stocks_percent.length;i++){
                    top_win_stocks_percentage[i]= Week4PandL_percent_list[top_win_stocks_percent[i]];

                }
                for(i=0;i<top_loss_stocks_percent.length;i++){
                    top_loss_stocks_percentage[i]= Week4PandL_percent_list[top_loss_stocks_percent[i]];

                }
                
            }

            if(period_value =="8"){
                for(i=0;i<top_win_stocks.length;i++){
                    top_win_stocks_$[i]=Week8PandL_list[top_win_stocks[i]];
                }

                for(i=0;i<top_loss_stocks.length;i++){
                    top_loss_stocks_$[i]=Week8PandL_list[top_loss_stocks[i]];
                }

                for(i=0;i<top_win_stocks_percent.length;i++){
                    top_win_stocks_percentage[i]= Week8PandL_percent_list[top_win_stocks_percent[i]];

                }
                for(i=0;i<top_loss_stocks_percent.length;i++){
                    top_loss_stocks_percentage[i]= Week8PandL_percent_list[top_loss_stocks_percent[i]];

                }
                
            }

            if(period_value =="12"){
                for(i=0;i<top_win_stocks.length;i++){
                    top_win_stocks_$[i]=Week12PandL_list[top_win_stocks[i]];
                }

                for(i=0;i<top_loss_stocks.length;i++){
                    top_loss_stocks_$[i]=Week12PandL_list[top_loss_stocks[i]];
                }

                for(i=0;i<top_win_stocks_percent.length;i++){
                    top_win_stocks_percentage[i]= Week12PandL_percent_list[top_win_stocks_percent[i]];

                }
                for(i=0;i<top_loss_stocks_percent.length;i++){
                    top_loss_stocks_percentage[i]= Week12PandL_percent_list[top_loss_stocks_percent[i]];

                }
                
            }

            if(period_value =="24"){
                for(i=0;i<top_win_stocks.length;i++){
                    top_win_stocks_$[i]=Week24PandL_list[top_win_stocks[i]];
                }

                for(i=0;i<top_loss_stocks.length;i++){
                    top_loss_stocks_$[i]=Week24PandL_list[top_loss_stocks[i]];
                }

                for(i=0;i<top_win_stocks_percent.length;i++){
                    top_win_stocks_percentage[i]= Week24PandL_percent_list[top_win_stocks_percent[i]];

                }
                for(i=0;i<top_loss_stocks_percent.length;i++){
                    top_loss_stocks_percentage[i]= Week24PandL_percent_list[top_loss_stocks_percent[i]];

                }
                
            }


            
                    var chart1 = new CanvasJS.Chart("chartContainer1", {
                    title:{
                        text: "Best Stocks based on ROI in $"              
                    },
                    data: [              
                    {
                        // Change type to "doughnut", "line", "splineArea", etc.
                        type: "column",
                        dataPoints: [
                        { label: codes_all[top_win_stocks[0]],  y: top_win_stocks_$[0]},
                            { label: codes_all[top_win_stocks[1]],  y: top_win_stocks_$[1]},
                            { label: codes_all[top_win_stocks[2]],  y: top_win_stocks_$[2]},
                            { label: codes_all[top_win_stocks[3]],  y: top_win_stocks_$[3]},
                            { label: codes_all[top_win_stocks[4]],  y: top_win_stocks_$[4]},
                            { label: codes_all[top_win_stocks[5]],  y: top_win_stocks_$[5]},
                            { label: codes_all[top_win_stocks[6]],  y: top_win_stocks_$[6]},
                            { label: codes_all[top_win_stocks[7]],  y: top_win_stocks_$[7]},
                            { label: codes_all[top_win_stocks[8]],  y: top_win_stocks_$[8]},
                            { label: codes_all[top_win_stocks[9]],  y: top_win_stocks_$[9]}
                        ]
                    }
                    ]
                });

                var chart2 = new CanvasJS.Chart("chartContainer2", {
                    title:{
                        text: "Worst Stocks based on ROI in $"              
                    },
                    data: [              
                    {
                        // Change type to "doughnut", "line", "splineArea", etc.
                        type: "column",
                        dataPoints: [
                        { label: codes_all[top_loss_stocks[0]],  y: top_loss_stocks_$[0]},
                            { label: codes_all[top_loss_stocks[1]],  y: top_loss_stocks_$[1]},
                            { label: codes_all[top_loss_stocks[2]],  y: top_loss_stocks_$[2]},
                            { label: codes_all[top_loss_stocks[3]],  y: top_loss_stocks_$[3]},
                            { label: codes_all[top_loss_stocks[4]],  y: top_loss_stocks_$[4]},
                            { label: codes_all[top_loss_stocks[5]],  y: top_loss_stocks_$[5]},
                            { label: codes_all[top_loss_stocks[6]],  y: top_loss_stocks_$[6]},
                            { label: codes_all[top_loss_stocks[7]],  y: top_loss_stocks_$[7]},
                            { label: codes_all[top_loss_stocks[8]],  y: top_loss_stocks_$[8]},
                            { label: codes_all[top_loss_stocks[9]],  y: top_loss_stocks_$[9]}
                        ]
                    }
                    ]
                });
                var chart3 = new CanvasJS.Chart("chartContainer3", {
                    title:{
                        text: "Best Stocks based on ROI %"              
                    },
                    data: [              
                    {
                        // Change type to "doughnut", "line", "splineArea", etc.
                        type: "column",
                        dataPoints: [
                        { label: codes_all[top_win_stocks_percent[0]],      y: top_win_stocks_percentage[0] },
                            { label: codes_all[top_win_stocks_percent[1]],  y:  top_win_stocks_percentage[1]},
                            { label: codes_all[top_win_stocks_percent[2]],  y:  top_win_stocks_percentage[2] },
                            { label: codes_all[top_win_stocks_percent[3]],  y:  top_win_stocks_percentage[3]},
                            { label: codes_all[top_win_stocks_percent[4]],  y:  top_win_stocks_percentage[4]},
                            { label: codes_all[top_win_stocks_percent[5]],  y:  top_win_stocks_percentage[5]},
                            { label: codes_all[top_win_stocks_percent[6]],  y:  top_win_stocks_percentage[6]},
                            { label: codes_all[top_win_stocks_percent[7]],  y:  top_win_stocks_percentage[7]},
                            { label: codes_all[top_win_stocks_percent[8]],  y:  top_win_stocks_percentage[8]},
                            { label: codes_all[top_win_stocks_percent[9]],  y:  top_win_stocks_percentage[9]}
                        ]
                    }
                    ]
                });

                var chart4 = new CanvasJS.Chart("chartContainer4", {
                    title:{
                        text: "Worst Stocks based on ROI %"              
                    },
                    data: [              
                    {
                        // Change type to "doughnut", "line", "splineArea", etc.
                        type: "column",
                        dataPoints: [
                        { label: codes_all[top_loss_stocks_percent[0]],      y: top_loss_stocks_percentage[0] },
                            { label: codes_all[top_loss_stocks_percent[1]],  y:  top_loss_stocks_percentage[1]},
                            { label: codes_all[top_loss_stocks_percent[2]],  y:  top_loss_stocks_percentage[2] },
                            { label: codes_all[top_loss_stocks_percent[3]],  y:  top_loss_stocks_percentage[3]},
                            { label: codes_all[top_loss_stocks_percent[4]],  y:  top_loss_stocks_percentage[4]},
                            { label: codes_all[top_loss_stocks_percent[5]],  y:  top_loss_stocks_percentage[5]},
                            { label: codes_all[top_loss_stocks_percent[6]],  y:  top_loss_stocks_percentage[6]},
                            { label: codes_all[top_loss_stocks_percent[7]],  y:  top_loss_stocks_percentage[7]},
                            { label: codes_all[top_loss_stocks_percent[8]],  y:  top_loss_stocks_percentage[8]},
                            { label: codes_all[top_loss_stocks_percent[9]],  y:  top_loss_stocks_percentage[9]}
                        ]
                    }
                    ]
                });

                

                

                chart1.render();
                chart2.render();
                chart3.render();
                chart4.render();

                var k = 'value';
                var i = 0;
                for(i = 1; i < 5; i++) {
                    eval('var ' + k + i + '= ' + i + ';');
                }
                console.log("value1=" + value1);
                console.log("value2=" + value2);
                console.log("value3=" + value3);
                console.log("value4=" + value4);


            }

            
        
        

    </script>
</body>
</html>